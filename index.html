<!DOCTYPE html>
<html lang="zh-TW">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>ğŸ“° æ–°èæ”¶é›†ç³»çµ± - GitHub Pages æ¸¬è©¦ç‰ˆ</title>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
   <style>
       /* é€™è£¡ä¿ç•™ä½ åŸæœ‰çš„å®Œæ•´ CSS æ¨£å¼ */
       /* ç‚ºäº†ç¯€çœç©ºé–“ï¼Œæˆ‘ä¿ç•™æ¨£å¼ä½†ä¸å…¨éƒ¨é¡¯ç¤º */
       * { margin: 0; padding: 0; box-sizing: border-box; }
       body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft JhengHei', sans-serif; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); color: #202124; line-height: 1.6; min-height: 100vh; padding: 20px; }
       .container { max-width: 1400px; margin: 0 auto; }
       .header { background: white; border-radius: 16px; padding: 30px; margin-bottom: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center; }
       .header h1 { font-size: 2.5rem; margin-bottom: 10px; color: #202124; }
       /* ... å…¶é¤˜ CSS ä¿æŒä¸è®Š ... */
   </style>
</head>
<body>
   <div class="container">
       <!-- é é¦– -->
       <div class="header">
           <h1><i class="fas fa-newspaper"></i> æ–°èæ”¶é›†ç³»çµ±</h1>
           <p>GitHub Pages æ¸¬è©¦ç‰ˆ - ä½¿ç”¨æ¨¡æ“¬è³‡æ–™</p>
           <p style="margin-top: 10px; color: #ea4335; font-size: 0.9em;">
               <i class="fas fa-info-circle"></i> ç•¶å‰ç‚ºæ¨¡æ“¬è³‡æ–™æ¨¡å¼ï¼ŒåŠŸèƒ½å®Œæ•´å±•ç¤º
           </p>
       </div>
       
       <!-- æ§åˆ¶æŒ‰éˆ• -->
       <div class="controls">
           <button class="btn btn-primary" onclick="loadNews()">
               <i class="fas fa-sync-alt"></i> è¼‰å…¥æ–°è
           </button>
           <button class="btn btn-secondary" onclick="showStats()">
               <i class="fas fa-chart-bar"></i> æª¢è¦–çµ±è¨ˆ
           </button>
           <button class="btn btn-outline" onclick="enableRealAPI()">
               <i class="fas fa-plug"></i> åˆ‡æ›çœŸå¯¦ API
           </button>
           <button class="btn btn-outline" onclick="testConnection()">
               <i class="fas fa-wifi"></i> æ¸¬è©¦é€£ç·š
           </button>
       </div>
       
       <!-- ç‹€æ…‹é¡¯ç¤º -->
       <div class="status-bar" id="statusBar">
           <div class="status-card">
               <div class="status-icon"><i class="fas fa-newspaper" style="color: #4285f4;"></i></div>
               <div class="status-value" id="totalNews">0</div>
               <div class="status-label">ç¸½æ–°èæ•¸</div>
           </div>
           <div class="status-card">
               <div class="status-icon"><i class="fas fa-rss" style="color: #34a853;"></i></div>
               <div class="status-value" id="totalSources">0</div>
               <div class="status-label">æ–°èä¾†æº</div>
           </div>
           <div class="status-card">
               <div class="status-icon"><i class="fas fa-tags" style="color: #9c27b0;"></i></div>
               <div class="status-value" id="totalCategories">0</div>
               <div class="status-label">æ–°èåˆ†é¡</div>
           </div>
           <div class="status-card">
               <div class="status-icon"><i class="fas fa-clock" style="color: #fbbc05;"></i></div>
               <div class="status-value" id="lastUpdateTime">--:--</div>
               <div class="status-label">æœ€å¾Œæ›´æ–°</div>
           </div>
       </div>
       
       <!-- è¼‰å…¥æŒ‡ç¤ºå™¨ -->
       <div class="loading" id="loading" style="display: none;">
           <div class="loader"></div>
           <p>æ­£åœ¨è¼‰å…¥æ–°èè³‡æ–™...</p>
       </div>
       
       <!-- éŒ¯èª¤è¨Šæ¯ -->
       <div class="error-message" id="errorMessage" style="display: none;">
           <i class="fas fa-exclamation-triangle"></i>
           <div id="errorText"></div>
       </div>
       
       <!-- æœ€å¾Œæ›´æ–°æ™‚é–“ -->
       <div class="last-updated" id="lastUpdated">
           <i class="fas fa-clock"></i> æœ€å¾Œæ›´æ–°æ™‚é–“: <span id="updateTimeText">å°šæœªæ›´æ–°</span>
       </div>
       
       <!-- æ–°èåˆ—è¡¨ -->
       <div class="news-grid" id="newsContainer">
           <!-- æ–°èå¡ç‰‡æœƒå‹•æ…‹ç”Ÿæˆåœ¨é€™è£¡ -->
       </div>
       
       <!-- é å°¾ -->
       <div class="footer">
           <p><i class="fas fa-code"></i> æ–°èæ”¶é›†ç³»çµ± v2.1.0 - GitHub Pages æ¸¬è©¦ç‰ˆ</p>
           <p>ç•¶å‰æ¨¡å¼: <span id="currentMode" style="color: #ea4335; font-weight: bold;">æ¨¡æ“¬è³‡æ–™</span></p>
           <p>ç¶²å€: https://steven002640.github.io</p>
       </div>
   </div>
   
   <!-- JavaScript ç¨‹å¼ç¢¼ - ä¿®æ­£ç‰ˆ -->
   <script>
       // ç³»çµ±è¨­å®š
       const CONFIG = {
           USE_MOCK_DATA: true,  // é è¨­ä½¿ç”¨æ¨¡æ“¬è³‡æ–™
           API_URL: 'https://script.google.com/macros/s/AKfycby-_9Y2ezmU-Li326SeVmCGpeIg6LwaGHF7_5EKng3QlY7sXoP0smrEyboNNLmGW-ui/exec',
           UPDATE_INTERVAL: 300000,
           CATEGORY_COLORS: {
               'ç§‘æŠ€': 'category-tech',
               'è²¡ç¶“': 'category-finance',
               'æ”¿æ²»': 'category-politics',
               'å¥åº·': 'category-health',
               'ç’°å¢ƒ': 'category-environment',
               'æ•™è‚²': 'category-education',
               'é‹å‹•': 'category-sports',
               'å¨›æ¨‚': 'category-entertainment',
               'å…¶ä»–': 'category-other'
           },
           CATEGORY_ICONS: {
               'ç§‘æŠ€': 'fas fa-microchip',
               'è²¡ç¶“': 'fas fa-chart-line',
               'æ”¿æ²»': 'fas fa-landmark',
               'å¥åº·': 'fas fa-heartbeat',
               'ç’°å¢ƒ': 'fas fa-leaf',
               'æ•™è‚²': 'fas fa-graduation-cap',
               'é‹å‹•': 'fas fa-running',
               'å¨›æ¨‚': 'fas fa-film',
               'å…¶ä»–': 'fas fa-newspaper'
           }
       };
       
       // æ¨¡æ“¬è³‡æ–™
       const MOCK_DATA = {
           success: true,
           data: {
               news: [
                   {
                       title: "GitHub Pages éƒ¨ç½²æˆåŠŸï¼",
                       summary: "ä½ çš„æ–°èæ”¶é›†ç³»çµ±å‰ç«¯å·²æˆåŠŸéƒ¨ç½²åˆ° GitHub Pagesï¼Œç¾åœ¨å¯ä»¥é€éç¶²è·¯è¨ªå•ã€‚",
                       category: "ç§‘æŠ€",
                       source: "GitHub",
                       link: "https://pages.github.com",
                       date: new Date().toISOString(),
                       timestamp: new Date().getTime()
                   },
                   {
                       title: "å‰ç«¯ä»‹é¢æ¸¬è©¦",
                       summary: "æ‰€æœ‰å¡ç‰‡ã€ç¯©é¸å™¨å’Œçµ±è¨ˆè³‡æ–™éƒ½èƒ½æ­£å¸¸é¡¯ç¤ºï¼ŒéŸ¿æ‡‰å¼è¨­è¨ˆä¹Ÿé‹ä½œè‰¯å¥½ã€‚",
                       category: "æ•™è‚²",
                       source: "é–‹ç™¼è€…",
                       link: "#",
                       date: new Date().toISOString(),
                       timestamp: new Date().getTime()
                   },
                   {
                       title: "æ–°èæ”¶é›†ç³»çµ±åŠŸèƒ½å±•ç¤º",
                       summary: "é€™æ˜¯ä¸€å€‹å®Œæ•´çš„å‰ç«¯ä»‹é¢ï¼ŒåŒ…å«ç‹€æ…‹é¡¯ç¤ºã€åˆ†é¡ç¯©é¸ã€ç†±é–€é—œéµå­—ç­‰åŠŸèƒ½ã€‚",
                       category: "ç§‘æŠ€",
                       source: "æ¸¬è©¦ä¾†æº",
                       link: "#",
                       date: new Date().toISOString(),
                       timestamp: new Date().getTime()
                   },
                   {
                       title: "ä¸‹ä¸€æ­¥ï¼šé€£æ¥çœŸå¯¦ API",
                       summary: "ç¢ºèªå‰ç«¯ä»‹é¢æ­£å¸¸å¾Œï¼Œå¯ä»¥åˆ‡æ›åˆ°çœŸå¯¦ API æ¨¡å¼æ¸¬è©¦è³‡æ–™é€£ç·šã€‚",
                       category: "æ•™è‚²",
                       source: "ç³»çµ±æç¤º",
                       link: "#",
                       date: new Date().toISOString(),
                       timestamp: new Date().getTime()
                   }
               ],
               statistics: {
                   total: 4,
                   bySource: {
                       "GitHub": 1,
                       "é–‹ç™¼è€…": 1,
                       "æ¸¬è©¦ä¾†æº": 1,
                       "ç³»çµ±æç¤º": 1
                   },
                   byCategory: {
                       "ç§‘æŠ€": 2,
                       "æ•™è‚²": 2
                   },
                   lastUpdated: new Date().toISOString()
               },
               hotKeywords: [
                   {keyword: "GitHub", count: 2, size: 20},
                   {keyword: "æ¸¬è©¦", count: 2, size: 18},
                   {keyword: "ç³»çµ±", count: 2, size: 16},
                   {keyword: "å‰ç«¯", count: 1, size: 14}
               ]
           },
           systemInfo: {
               version: "1.0.0",
               executionTime: 100
           }
       };
       
       // å…¨åŸŸç‹€æ…‹
       let currentNews = [];
       let currentFilter = 'all';
       
       // é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œ
       document.addEventListener('DOMContentLoaded', function() {
           console.log('æ–°èæ”¶é›†ç³»çµ±å‰ç«¯å•Ÿå‹• - æ¨¡æ“¬è³‡æ–™æ¨¡å¼');
           loadNews();  // è‡ªå‹•è¼‰å…¥æ¨¡æ“¬è³‡æ–™
       });
       
       // è¼‰å…¥æ–°èè³‡æ–™
       async function loadNews() {
           showLoading(true);
           hideError();
           
           try {
               if (CONFIG.USE_MOCK_DATA) {
                   console.log('ä½¿ç”¨æ¨¡æ“¬è³‡æ–™');
                   // æ¨¡æ“¬ç¶²è·¯å»¶é²
                   await new Promise(resolve => setTimeout(resolve, 800));
                   processNewsData(MOCK_DATA.data);
                   showMessage('âœ… æ¨¡æ“¬è³‡æ–™è¼‰å…¥æˆåŠŸ', 'success');
                   document.getElementById('currentMode').textContent = 'æ¨¡æ“¬è³‡æ–™';
                   document.getElementById('currentMode').style.color = '#ea4335';
               } else {
                   console.log('å˜—è©¦é€£æ¥çœŸå¯¦ API:', CONFIG.API_URL);
                   const response = await fetch(CONFIG.API_URL);
                   
                   if (!response.ok) {
                       throw new Error(`HTTP éŒ¯èª¤: ${response.status}`);
                   }
                   
                   const result = await response.json();
                   
                   if (!result.success) {
                       throw new Error(result.error || 'API éŒ¯èª¤');
                   }
                   
                   processNewsData(result.data);
                   showMessage('âœ… çœŸå¯¦ API è³‡æ–™è¼‰å…¥æˆåŠŸ', 'success');
                   document.getElementById('currentMode').textContent = 'çœŸå¯¦ API';
                   document.getElementById('currentMode').style.color = '#34a853';
               }
               
           } catch (error) {
               console.error('è¼‰å…¥å¤±æ•—:', error);
               showError(`è¼‰å…¥å¤±æ•—: ${error.message}`);
               
               // å¤±æ•—æ™‚è‡ªå‹•åˆ‡å›æ¨¡æ“¬è³‡æ–™
               if (!CONFIG.USE_MOCK_DATA) {
                   CONFIG.USE_MOCK_DATA = true;
                   setTimeout(() => {
                       showMessage('âš ï¸ å·²è‡ªå‹•åˆ‡æ›å›æ¨¡æ“¬è³‡æ–™æ¨¡å¼', 'warning');
                       loadNews();
                   }, 1000);
               }
           } finally {
               showLoading(false);
           }
       }
       
       // åˆ‡æ›åˆ°çœŸå¯¦ API
       function enableRealAPI() {
           if (confirm('ç¢ºå®šè¦åˆ‡æ›åˆ°çœŸå¯¦ API æ¨¡å¼å—ï¼Ÿ\n\nå¦‚æœ API ç„¡æ³•é€£æ¥ï¼Œç³»çµ±æœƒè‡ªå‹•åˆ‡å›æ¨¡æ“¬è³‡æ–™ã€‚')) {
               CONFIG.USE_MOCK_DATA = false;
               showMessage('æ­£åœ¨åˆ‡æ›åˆ°çœŸå¯¦ API æ¨¡å¼...', 'info');
               loadNews();
           }
       }
       
       // æ¸¬è©¦é€£ç·š
       async function testConnection() {
           showMessage('æ­£åœ¨æ¸¬è©¦é€£ç·š...', 'info');
           
           if (CONFIG.USE_MOCK_DATA) {
               showMessage('âœ… æ¨¡æ“¬è³‡æ–™æ¨¡å¼é‹ä½œæ­£å¸¸', 'success');
               return;
           }
           
           try {
               const response = await fetch(CONFIG.API_URL + '?action=test');
               const data = await response.json();
               
               if (data.success) {
                   showMessage(`âœ… API é€£ç·šæ­£å¸¸ (v${data.version})`, 'success');
               } else {
                   showMessage(`âŒ API éŒ¯èª¤: ${data.error}`, 'error');
               }
           } catch (error) {
               showMessage(`âŒ é€£ç·šå¤±æ•—: ${error.message}`, 'error');
           }
       }
       
       // ä»¥ä¸‹æ˜¯ä½ åŸæœ‰çš„è™•ç†å‡½æ•¸ï¼Œä¿æŒä¸è®Š
       function processNewsData(data) {
           currentNews = data.news || [];
           displayStatistics(data.statistics);
           displayHotKeywords(data.hotKeywords);
           displayCategoryFilters(data.statistics?.byCategory);
           displayNewsList(currentNews);
           updateLastUpdatedTime(data.statistics?.lastUpdated);
       }
       
       function displayStatistics(statistics) {
           if (!statistics) return;
           document.getElementById('totalNews').textContent = statistics.total || 0;
           document.getElementById('totalSources').textContent = Object.keys(statistics.bySource || {}).length;
           document.getElementById('totalCategories').textContent = Object.keys(statistics.byCategory || {}).length;
           
           if (statistics.lastUpdated) {
               const date = new Date(statistics.lastUpdated);
               const timeStr = date.toLocaleTimeString('zh-TW', {hour: '2-digit', minute:'2-digit'});
               document.getElementById('lastUpdateTime').textContent = timeStr;
           }
       }
       
       function displayHotKeywords(keywords) {
           // ... ä½ åŸæœ‰çš„å‡½æ•¸ ...
       }
       
       function displayCategoryFilters(categories) {
           // ... ä½ åŸæœ‰çš„å‡½æ•¸ ...
       }
       
       function displayNewsList(news) {
           // ... ä½ åŸæœ‰çš„å‡½æ•¸ ...
       }
       
       function filterNews(category) {
           // ... ä½ åŸæœ‰çš„å‡½æ•¸ ...
       }
       
       function showStats() {
           if (currentNews.length === 0) {
               showMessage('å°šæœªè¼‰å…¥æ–°èè³‡æ–™', 'warning');
               return;
           }
           alert(`ğŸ“Š çµ±è¨ˆè³‡è¨Š\n\nç¸½æ–°èæ•¸: ${currentNews.length}\nè³‡æ–™æ¨¡å¼: ${CONFIG.USE_MOCK_DATA ? 'æ¨¡æ“¬è³‡æ–™' : 'çœŸå¯¦ API'}`);
       }
       
       // å·¥å…·å‡½æ•¸
       function showLoading(show) {
           document.getElementById('loading').style.display = show ? 'block' : 'none';
       }
       
       function showError(message) {
           document.getElementById('errorText').textContent = message;
           document.getElementById('errorMessage').style.display = 'flex';
       }
       
       function hideError() {
           document.getElementById('errorMessage').style.display = 'none';
       }
       
       function showMessage(text, type) {
           console.log(`${type}: ${text}`);
           // ç°¡å–®æç¤º
           const colors = {'info':'#4285f4','success':'#34a853','warning':'#fbbc05','error':'#ea4335'};
           console.log(`%c${text}`, `color: ${colors[type]}; font-weight: bold;`);
       }
       
       function updateLastUpdatedTime(timestamp) {
           const timeStr = timestamp ? new Date(timestamp).toLocaleString('zh-TW') : new Date().toLocaleString('zh-TW');
           document.getElementById('updateTimeText').textContent = timeStr;
       }
       
       // åˆå§‹åŒ–
       console.log('ç³»çµ±åˆå§‹åŒ–å®Œæˆ');
   </script>
</body>
</html>
